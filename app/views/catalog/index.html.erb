  <div id='filters'>
  <!--<div id='drawer-link'>
    <a href="#" id="trigger" class="menu-trigger">
      Programs & Requirements
    </a>
  </div>-->
  <!--span id='year'><%= @year.name %> Courses</span-->
  <div class="mdc-layout-grid" style="margin:0px; padding:0px;">
    <div class="mdc-layout-grid__inner" style="grid-gap: 0px 24px;">
      <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone nav-col-1">
        <nav id="age-filter" class="mdc-tab-bar courses-bar"><!-- *****   NEED TO ACCOUNT FOR id="age-filter"   ***** -->
          <span class='mdc-typography--headline courses-headers'>Grade Level</span>
          <a data-age='all' class="mdc-tab mdc-tab--active age-all">5<sup>th</sup>-12<sup>th</sup></a>
          <a class='mdc-tab age-ms' data-age='ms'>Middle School</a>
          <a class='mdc-tab age-us' data-age='us'>Upper School</a>
        </nav>
        <nav id="duration-filter" class="mdc-tab-bar courses-bar"><!--  ******  NEED TO ACCOUNT FOR id="duration-filter   ***** -->
          <span class='mdc-typography--headline'>Duration</span>
          <a data-duration="all" class="mdc-tab mdc-tab--active duration-all">All Lengths</a>
          <a class='mdc-tab duration-T' data-duration='T'>Trimester</a>
          <a class='mdc-tab duration-Y' data-duration='Y'>Year</a>
          <a class='mdc-tab duration-S' data-duration='S'>Seminar</a>
        </nav>
      </div>
      <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12-desktop mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-2-phone">
        <nav id="dept-filter" class="mdc-tab-bar courses-bar"><!-- ******   NEED TO ACCOUNT FOR id="discipline-filter"   ****** -->
          <span class='mdc-typography--headline courses-headers'>Disciplines</span>
          <% subj = ["English","Social Sci.","Math","Science","Spanish","Arts","P.E."] %>
          <a data-dept='all' class="mdc-tab mdc-tab--active dept-all">All</a>
          <% 7.times do |i| %>
            <a class='mdc-tab dept-<%=i+1%>'  data-dept='<%=i+1%>'>
            <%= subj[i] %>
          </a>
          <% end %>
          <a class='mdc-tab dept-10' data-dept='10'>Tech</a>
          <a class='mdc-tab dept-8' data-dept='8'>Interdisciplinary</a>
          <a class='mdc-tab dept-11' data-dept='11'>Seminars</a>
          <a class='mdc-tab dept-11' data-dept='11'>Req's.</a> <!-- *****  FOR REQ SORT  *****  -->
          <span class="mdc-tab-bar__indicator"></span>
        </nav>
  <div id='course-filter-stats'>
    Showing <span id='course-count'>... Courses</span>
  </div>
      </div>
    </div>
  </div>
</div>
<!-- Push Wrapper -->
<!-- render partial: "menu" This was the discipline description menu -->
<div class="mdc-layout-grid"><!--<div id='course-catalog'>-->
  <div class="mdc-layout-grid__inner">
  <% current_dept_id = 0 %>
	<% @courses.each do |course| %>
      <% if course.department_id != current_dept_id %>
        <%=department_card_for(course.department_id)%>
        <% current_dept_id = course.department_id %>
      <% end %>
    <% begin %>
	  	<%= render course %>
    <% rescue %>
      ERROR WITH COURSE <%=course.id%> and OFFERING <%=course.try(:current_course_offering)%>
    <% end %>	
	<% end %>
	</div>
</div>

<script>
  
  function setActiveFilter(el, target){
    var age = $(el).data(target);
    $('nav#' + target + '-filter a').removeClass('mdc-tab--active');
    $('nav#' + target + '-filter a[data-' + target + '="' + age + '"]').addClass('mdc-tab--active');
  }

  function filterTiles(dept,ages,duration){
      console.log("Filters",dept,ages,duration);
      $('div.course-container').hide(); 
      $('div.course-container').filter(function(){
          return (dept == 'all' || $(this).data("dept") == dept) &&
                  (ages == 'all' || $(this).data('age') == 'a' || $(this).data('age') == ages) &&
                  (duration == 'all' || $(this).data('duration') == duration);
      }).delay(10).fadeIn();
      $('body').delay(10).animate( { scrollTop : 0 }, 350 );
      $('#course-count').fadeOut(500);
      setTimeout("$('#course-count').html($('.course-container:visible').size() + ' Course' + ($('.course-container:visible').size() != 1 ? 's' : '')).fadeIn(500);",1000);
      /*
      if (dept == 0) {
        $('ul#og-grid li').fadeIn();
      } else {
        $('ul#og-grid li').fadeOut();
        $('li.dept-' + dept).delay(300).fadeIn();
      }
        */
  };

  function buildFilters(ary){
    $.each(ary,function(ind,filter){
      $('nav#'+filter+'-filter a').on('click',function(){setActiveFilter(this, filter);});
    });
  }
    $(document).ready(function() {
        console.log("document ready");
        buildFilters(["age","duration","dept"]);

        $('#course-count').html($('.course-card:visible').size() + ' Courses');
        $('nav a').on('click',function(){
           <%# var dept = $(this).data('dept');
           var age = $(this).data('age');
           var duration = $(this).data('duration'); %>
           
           filterTiles($("nav#dept-filter a.mdc-tab--active").data('dept'),
                        $("nav#age-filter a.mdc-tab--active").data('age'),
                        $("nav#duration-filter a.mdc-tab--active").data('duration'));
        });
        

    });
</script>
